{% if messages|length == 1 and messages[0]['role'] == 'assistant' %}
{% for message in messages %}
{% if message['role'] == 'assistant' %}{{ 'Assistant: ' + message['content'] + eos_token }}{% endif %}
{% endfor %}
{% else %}
{% if not add_generation_prompt is defined %}{% set add_generation_prompt = false %}{% endif %}
{{ bos_token }}
{% for message in messages %}
{% if message['role'] == 'user' %}{{ 'User: ' + message['content'] + '\n\n' }}
{% elif message['role'] == 'assistant' %}{{ 'Assistant: ' + message['content'] + eos_token }}
{% elif message['role'] == 'system' %}{{ message['content'] + '\n\n' }}
{% endif %}
{% endfor %}
{% if add_generation_prompt %}{{ 'Assistant:' }}{% endif %}
{% endif %}